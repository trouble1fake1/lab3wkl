name: Install Python Package from Azure Blob Storage

on:
  push:
    branches:
      - main

jobs:
  install-package:
    name: Download and Install requests Package
    runs-on: ubuntu-latest
    environment: azure-storage-env  # GitHub Environment (can restrict secret access)

    env:
      REQUEST_PACKAGE_URL: ${{ secrets.REQUEST_PACKAGE_URL }}

    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Download requests package from Azure Blob
        run: |
          curl -L "$REQUEST_PACKAGE_URL" -o requests-2.32.3.tar.gz

      - name: Extract and install package
        run: |
          env
          tar -xzf requests-2.32.3.tar.gz
          cd requests-2.32.3
          pip install .
